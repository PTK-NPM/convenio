<!DOCTYPE html>
<html lang="pt-BR">
<head>
    {%load static%}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{% static 'DoctorNet_app/favicon.png' %}" type="image/png">
    <link rel="stylesheet" href="{% static 'DoctorNet_app/style.css' %}">
    
    <title>Document</title>
</head>
<body>
    
    {%block conteudo%}
    {%endblock conteudo%}
    
</body>

<script>
document.getElementById('add-form-btn').addEventListener('click', function() {
    // Pega o número total de formulários que já existem
    const totalFormsInput = document.getElementById('id_procedimentos-TOTAL_FORMS');
    const currentFormCount = parseInt(totalFormsInput.value, 10);

    // Pega o HTML do nosso molde
    const emptyFormHtml = document.getElementById('empty-form').innerHTML;
    
    // Substitui o prefixo padrão pelo índice do novo formulário
    const newFormHtml = emptyFormHtml.replace(/__prefix__/g, currentFormCount);

    // Insere o novo formulário no container
    const formContainer = document.getElementById('procedimentos-container');
    formContainer.insertAdjacentHTML('beforeend', newFormHtml);
    
    // Atualiza o contador de formulários no management form
    totalFormsInput.value = currentFormCount + 1;
});
</script>

</html>
